<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.site.chanchanchan.mapper.OrderDetailMapper">
	
	<select id="list" parameterType="Integer" resultType="OrderDetail">
		SELECT od.order_id,od.product_id AS product_id,ol.order_totalpayment AS order_totalpayment,
		ol.payment_method AS payment_method,ol.order_date AS order_date,
		ol.order_state AS order_state,ol.receiver AS receiver
		FROM order_detail od
		INNER JOIN order_list ol ON od.order_id = ol.order_id 
		INNER JOIN product pr ON od.product_id = pr.product_id
		WHERE member_index = #{member_index} ORDER BY order_id desc
	</select>
	
	
	<select id="orddetail" parameterType="Integer" resultType="OrderDetail">
		SELECT pr.product_name AS product_name,ol.order_totalpayment AS order_totalpayment,
		ol.payment_method AS payment_method,ol.order_date AS order_date,
		ol.order_state AS order_state,ol.receiver AS receiver
		FROM order_detail od
		INNER JOIN order_list ol ON od.order_id = ol.order_id 
		INNER JOIN product pr ON od.product_id = pr.product_id
		WHERE od.orderdetail_id = #{orderdetail_id}
	</select>
	<select id="rvprid" parameterType="Integer" resultType="OrderDetail">
		SELECT od.product_id AS product_id
		FROM order_detail AS od
		INNER JOIN order_list AS ol ON od.order_id = ol.order_id
		WHERE ol.order_id = #{order_id}
	</select>
	
</mapper>